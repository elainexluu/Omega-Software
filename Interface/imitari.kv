#:import rgba kivy.utils.get_color_from_hex

<Label>:
    font_name: "LemonMilk"
    
<Border@Widget>:
    pos_hint: {'center_x':0.5,'center_y':0.5}
    canvas:
        Color:
            rgba: (1,1,1,1)
        
        Rectangle:
            pos: 15,15
            size: (self.width-30,self.height-30)
        Color:
            rgba: (0,0,0,1)
        Line:
            width: 1.5
            rectangle: self.x+15, self.y+15, self.width-30, self.height-30
            
<MyButton@Button>:
    background_normal: ''
    background_color: (0.4,0.74,0.91,1)
    canvas.before:
        Color:
            rgba: 0,0,0,1
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height
    background_down: ''
    color: (0, 0, 0, 1)
    on_press: self.background_color = (0.99,0.84,0.04,1)
    on_release: self.background_color = (0.4,0.74,0.91,1)
    
<MyProgress@ProgressBar>:
    id: pb
    value: 50
    size_hint_x: 0.5

<ProgressLabel@Label>:
    id: pblabel
    font_size: 20
    size: self.texture_size
    valign: "top"
    halign: "center"
    text_size: root.width-30, None
    color: (0,0,0,1)

<PhotoDisplayBorder@Widget>:
    pos_hint: {'center_x':0.5,'center_y':0.5}
    canvas:
        Color:
            rgba: (1,1,1,1) 
        Rectangle:
            size: self.size
            pos: self.pos
        Color:
            rgba: (0,0,0,1)
        Line:
            width: 1.5
            rectangle: self.x+15, self.y+15, self.width-30, self.height-30

<FolderButton@Button>:
    color: (0, 0, 0, 1)
    text_size: self.size
    background_normal: ''
    background_color: (0.99,0.84,0.04,1)
    canvas.before:
        Color:
            rgba: (0,0,0,1)
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height
    background_down: ''
    halign: 'center'
    valign: 'center'
    font_size: sp(13)
    height: dp(10)
    width: dp(5)
    on_press: self.background_color = (0.4,0.74,0.91,1)
    on_release: self.background_color = (0.99,0.84,0.04,1)
        

<GroupColor@Widget>:
    background_normal: ''
    canvas.before:
        Color:
            rgba: (0.4,0.74,0.91,1)
        Rectangle:
            pos: self.pos 
            size: self.size     
        Color: 
            rgba: (0,0,0,1)       
        Line:
            width: 1.5
            rectangle: self.x, self.y, self.width, self.height      
    size_hint_y: None
    height: dp(20)

<GroupLabel@Label+GroupColor>:
    text_size: self.size
    padding_x: 20
    color: (0, 0, 0, 1)

<ImageButton@Button>:
    id: image
    background_down: ''
    on_press: app.root.current = "photozoom"

<HomeWindow>:
    name: "home"
    PhotoRoot:
        Border:
        GridLayout:
            cols: 1 
            rows: 3
            pos_hint: {"center_x":0.5,"center_y": 0.6}
            Label:
                color: (0,0,0,1)
                bold: True
                font_size: 30
                text: "IMITARI"
                size: self.texture_size
                text_size: root.width-30, None
                halign: "center"
                valign: "top"  
            BoxLayout:
                size_hint_y: 0.4
                Image:
                    source: 'logo.png'
                    size_hint_y: 2
                    pos_hint: {"center_x":1,"center_y":0.8}
                    
            AnchorLayout:
                anchor_y: "top"
                anchor_x: "center"
                Label:
                    color: (0,0,0,1)
                    text: "Team Omega App Development in Progress"
                    size_hint_x: 0.6
                    size: self.texture_size
                    text_size: root.width-30, None
                    halign: "center"
                    valign: "top"
                
        MyButton:
            id: begin
            text: "Begin Sweeping"
            size_hint: (0.6,0.1)
            pos_hint: {"center_x":0.5,"center_y":0.2}
            on_release: 
                app.root.current = "loadingscreen"
                root.manager.transition.direction = 'left'
            
<LoadingWindow>:
    name: "loadingscreen"
    pb: pb
    PhotoRoot:
        Border:
        GridLayout:
            cols: 1 
            rows: 4
            pos_hint: {"center_x":0.5,"center_y": 0.56}
            Label:
                color: (0,0,0,1)
                bold: True
                font_size: 30
                text: "IMITARI"
                size: self.texture_size
                text_size: root.width-30, None
                halign: "center"
                valign: "bottom"  
            BoxLayout:
                size_hint_y: 0.4
                Image:
                    source: 'logo.png'
                    size_hint_y: 2
                    pos_hint: {"center_x":1,"center_y":0.6}
                    
                    
            AnchorLayout:
                anchor_y: "bottom"
                anchor_x: "center"
                Label:
                    color: (0,0,0,1)
                    text: "Sweeping..."
                    size_hint_x: 0.6
                    size_hint_y: 0.5
                    size: self.texture_size
                    text_size: root.width-30, None
                    halign: "center"
                    valign: "top"
                ProgressLabel:
                    id: pblabel
                    text: str(pb.value) + "%"
            
            AnchorLayout:
                size_hint_y: 0.5  
                MyProgress:
                    id: pb
                    anchor_y: "top"
                    anchor_x: "center"

        # temporary button just to bypass loading screen DELETE BEFORE EXPORT
        MyButton:
            text: "next page"
            text_size: self.size
            size_hint: (0.1,0.1)
            pos_hint: {'center_x':0.9,'center_y':0.2}
            on_release: 
                app.root.current = "photodisplay"
                root.manager.transition.direction = 'left'

<PhotoDisplayWindow>:
    name: "photodisplay"
    PhotoRoot:
        PhotoDisplayBorder:

        GridLayout: 
            cols: 1
            rows: 2
            padding: 15
    
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.2
                spacing: 25
                padding: 20
                
                FolderButton:
                    id: displayback
                    text: "Go Back" 
                    on_release:
                        app.root.current = "home"
                        root.manager.transition.direction = 'right'

                FolderButton:
                    id: select
                    text: "Select Photos"
                    
                FolderButton:
                    id: folder
                    text: "Folders" 
           
            BoxLayout:      
                orientation: 'vertical'

                GroupLabel:
                    text: "Group 1"
    
                GridLayout:
                    spacing: 5
                    padding: 5
                    cols: 3
            
                    ImageButton: 
                        background_normal: 'images/image1.jpg'
                    ImageButton: 
                        background_normal: 'images/image2.jpg'
                    ImageButton:
                        background_normal: 'images/image3.jpg'
        
                GroupLabel:
                    text: "Group 2"
    
                GridLayout:
                    padding: 5
                    spacing: 5
                    cols: 3
            
                    ImageButton: 
                        background_normal: 'images/image4.jpg'

                    ImageButton: 
                        background_normal: 'images/image5.jpg'

                    ImageButton: 
                        background_normal: 'images/image6.jpg'
                        
                GroupLabel:
                    text: "Group 3"  
                
                GridLayout:
                    padding: 5
                    spacing: 5
                    cols: 3
            
                    ImageButton: 
                        background_normal: 'images/image7.jpg'
    
                    ImageButton: 
                        background_normal: 'images/image8.jpg'
                
                    ImageButton:
                        background_normal: 'images/image9.jpg'
                        
                GroupLabel:
                    text: "Group 4"            
                
                GridLayout:
                    padding: 5
                    spacing: 5
                    cols: 4
            
                    ImageButton: 
                        background_normal: 'images/image10.jpg'
    
                    ImageButton: 
                        background_normal: 'images/image11.jpg'
                        
                    ImageButton: 
                        background_normal: 'images/image12.jpg'
                                               
                    ImageButton: 
                        background_normal: 'images/image13.jpg'
                               
                GroupLabel:
                    text: "Group 5"              
                               
                GridLayout:
                    padding: 5
                    spacing: 5
                    cols: 3
            
                    ImageButton: 
                        background_normal: 'images/image14.jpg'
    
                    ImageButton: 
                        background_normal: 'images/image15.jpg'
                        
                    ImageButton: 
                        background_normal: 'images/image16.jpg'

<PhotoZoomWindow>:
    # a window for when a singular image is being inspected by the user in full screen
    name: "photozoom"
    
    GridLayout:
        cols: 1
        rows: 3 
        
        AnchorLayout:
            anchor_y: "top"
            size_hint_y: 0.2
            GridLayout:
                cols: 3
                rows: 1
                padding: 10
                FolderButton:
                    id: "zoomback"
                    text: "Go Back"
                    on_release: 
                        app.root.current = "photodisplay"
                        root.manager.transition.direction = 'right'
                        
                Label:
                    size_hint_x: 2
                    color: (0,0,0,1)
                    text: "Preview"
                    bold: True
                    font_size: 20
                               
                FolderButton:
                    text: "Delete"
                
        AnchorLayout:
            padding: 10,70,10,10
            canvas:
                Color: 
                    rgba: (1,1,1,1)
                Rectangle:
                    size: (self.width,self.height-60)
                    pos: self.pos
                
            Image:
                source: 'images/image2.jpg'
                size: self.texture_size
                pos: self.pos
                
                
        AnchorLayout:
            size_hint_y: 0.2
            

        

WindowManager:
    HomeWindow:
    LoadingWindow:
    PhotoDisplayWindow:
    PhotoZoomWindow: 
